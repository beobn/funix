<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lab 17.7</title>
</head>
<body>
    <h2>So sánh kết quả thi đấu</h2>
    Kết quả của Dolphins: <br><br>
    <label for="">
        Kết Quả lần 1: <input type="number" id="Dp1">
    </label>
    <label for="">
        Kết Quả lần 2: <input type="number" id="Dp2">
    </label>
    <label for="">
        Kết Quả lần 3: <input type="number" id="Dp3">
    </label>
    <br> <br>
    Kết quả của Koalas: <br><br>
    <label for="">
        Kết Quả lần 1: <input type="number" id="Kl1">
    </label>
    <label for="">
        Kết Quả lần 2: <input type="number" id="Kl2">
    </label>
    <label for="">
        Kết Quả lần 3: <input type="number" id="Kl3">
    </label>
    <br> <br>

    <button onclick="checkWinner()">So sánh</button>
    <br> <br><br> <br>
     <h2>tip calculator</h2>
     <label for="" id="tip">
        Nhập hóa đơn:<br> <input type="number" name="bill" ><br>
    </label>
    <br><button onclick="addbills()" >Thêm hóa đơn</button><br>
    
    <br><button onclick="calcTip()">in hóa đơn</button>
    <br> <br>
    <script>
        let Dolphins = [];
        let Koalas = [];
        
        function calcAverage(params) {
            
            let sum = 0;
            for (const a of params) {
                sum +=  new Number(a);
            }
            return sum/3;
        }
        function checkWinner() {
            Dolphins = new Array(document.getElementById('Dp1').value, document.getElementById('Dp2').value, document.getElementById('Dp3').value);
            Koalas = new Array (document.getElementById('Kl1').value, document.getElementById('Kl2').value, document.getElementById('Kl3').value);
            console.log(Dolphins);
            if(calcAverage(Dolphins)>calcAverage(Koalas)*2){
                console.log('Dolphins win ' + calcAverage(Dolphins) + ' vs '+calcAverage(Koalas));
            } else if(calcAverage(Koalas)>calcAverage(Dolphins)*2){
                console.log('Koalas win ' + calcAverage(Koalas) + ' vs '+calcAverage(Dolphins));
            } else{
                console.log('không đội nào dành chiến thắng');
            }
            
        }
        function addbills() {
            const ins = document.getElementById("tip");
            let html = "<br><input type='number' name='bill'><br>";
            ins.insertAdjacentHTML("beforeend", html);
        }
        function calcTip() {
             let bills=[];
             let tip=[];
             document.getElementsByName("bill").forEach(element => {
                bills.push(element.value)
             });
             console.log(bills);
             bills.forEach(element => {
                tip.push( element >=50 ? element*15/100 : element<= 300 ? element*15/100 : element*20/100)
             })
             console.log(tip);
             let total = bills.reduce((a, b) => new Number(a) + new Number(b), 0)+ tip.reduce((a, b) => new Number(a) + new Number(b), 0)
             console.log(total);

        }


    </script>
    
</body>
</html>